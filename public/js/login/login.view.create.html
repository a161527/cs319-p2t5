<div class='container'>
	<br>
	<div class='row'>
		<form name='createAcctForm' novalidate>

			<div class='col-md-offset-3 col-md-6'>
				<h4>Account Information</h4>
				<div class="panel panel-default">
					<div class="panel-body">

						<div class='row'>
							<div class='col-md-6'>
								<div class='form-group' ng-class='{"has-error": !createAcctForm.username.$valid && createAcctForm.username.$dirty}'>
									<label for='username'>Username</label>

									<!--Restrict inputs to alpha numeric characters and dashes/underscores-->
									<input type='text' ng-model='username' ng-pattern='/^[a-zA-Z0-9_-]*$/' class='form-control' id='username' name='username' required>

									<error-message ng-show='createAcctForm.username.$error.pattern && !createAcctForm.username.$error.required'>
										Username can only contain alphanumeric characters, dashes, and underscores
									</error-message>

									<!--Required error message, only show when dirty-->
									<error-message ng-show='createAcctForm.username.$error.required && createAcctForm.username.$dirty'>
										Username is required
									</error-message>
								</div>
							</div>

							<div class='col-md-6'>
								<div class='form-group' ng-class='{"has-error": createAcctForm.email.$error.email, "has-success": createAcctForm.email.$valid}'>
									<label for='email'>Email</label>

									<!--Restrict inputs to alpha numeric characters and dashes/underscores-->
									<input type='email' ng-model='email' ng-model-options='{updateOn: "blur"}' class='form-control' id='email' name='email' required>
									
									<error-message ng-show='createAcctForm.email.$error.email && createAcctForm.email.$touched'>
										Not a valid email
									</error-message>
								</div>
							</div>
						</div>

						<div class='row'>
							<div class='col-md-6'>
								<div class='form-group' ng-class='{"has-error": !createAcctForm.password.$valid && createAcctForm.password.$dirty}'>
									<label for='password'>Password</label>

									<!--Restrict inputs to alpha numeric characters and dashes/underscores-->
									<input type='password' ng-model='password'  ng-model-options='{updateOn: "blur"}' ng-minlength='8' class='form-control' id='password' name='password' required>

									<!--Show error messages for password-->
									<!--Invalid password message, if required error exists, show that instead-->
									<error-message ng-show='createAcctForm.password.$error.minlength && !createAcctForm.password.$error.required'>
										Password must be atleast 8 characters long
									</error-message>

									<!--Required error message, only show when dirty-->
									<error-message ng-show='createAcctForm.password.$error.required && createAcctForm.password.$dirty'>
										Password is required
									</error-message>
								</div>
							</div>

							<div class='col-md-6'>
								<div class='form-group'>
									<label for='confirmPassword'>Confirm Password</label>

									<!--Restrict inputs to alpha numeric characters and dashes/underscores-->
									<input type='password' ng-model='confirmPassword'  ng-model-options='{updateOn: "blur"}' ng-minlength='8' class='form-control' id='confirmPassword' name='confirmPassword' required>

									<!--Show error messages for confirmPassword-->
									<!--Invalid confirmPassword message, if required error exists, show that instead-->
									<error-message ng-hide='true'>
										Password does not match
									</error-message>
									
								</div>
							</div>
						</div>

						<div class='row'>
							<div class='col-md-6'>
								<div class='form-group' ng-class='{"has-error": !createAcctForm.phone.$valid && createAcctForm.phone.$dirty}'>
									<label for='phone'>Phone</label>

									<!--Restrict inputs to alpha numeric characters and dashes/underscores-->
									<input type='text' ng-pattern='/^(\d+(-\d+)?)*$/' ng-model='phone' class='form-control' id='phone' name='phone'>

									<!--Required error message, only show when dirty-->
									<error-message ng-show='createAcctForm.phone.$error.pattern'>
										Phone number is not valid
									</error-message>
								</div>
							</div>
						</div>

						<div class='row'>
							<div class='col-md-8'>
								<h4>Dependents</h4>
							</div>
							<div class='col-md-2'>
								<button class='btn btn-default btn-block' ng-click='addPerson()'>Add</button>
							</div>
							<div class='col-md-2'>
								<button class='btn btn-default btn-block' ng-click='deleteLastPerson()'>Delete</button> 
							</div>
						</div>

						
						<div ng-repeat='idx in dependentIndices'>
							<div class="panel panel-default">
								<div class="panel-body">
									<div class='row'>
										<div class='col-md-6'>
											<required-input model='firstname[idx]' validation='createAcctForm' identifier='firstname{{idx}}'>First Name</required-input>
										</div>

										<div class='col-md-6'>
											<required-input model='lastname[idx]' validation='createAcctForm' identifier='lastname{{idx}}'>Last Name</required-input>
										</div>
									</div>
								</div>
							</div>
						</div>
					
					</div>
				</div>
			
				<button class='btn btn-default pull-right' ng-click='createAccount(createAcctForm)'>Create Account</button>
				
			</div>
		</form>
	</div>
</div>