/*
@Params:
	validation: angular validation object generated by setting the name of a form attribute
	model: ng-model, should be defined in the controller
	identifer: unique identifier for the inputs
	inpType: input type eg. password, text
	changeFn: function, optional, if exists, bind to input and execute whenever change occurs
*/
(function() {
	'use strict'

	angular.module('forms')
		.directive('inputWithValidation', function() {
			return {
				restrict: 'E',
				replace: true,
				transclude: true,
				scope: {
					validation: '=',
					model: '=',
					identifier: '@',
					inpType: '@',
					changeFn: '&'
				},
				templateUrl: 'js/forms/forms.view.inputWithValidation.html',
				link: function(scope, elements, attrs) {

					//Bind the change function
					if (scope.changeFn) {
						elements.find('input').bind('change', function() {
							scope.changeFn()
						});
					}

				}
			}
		})

})()