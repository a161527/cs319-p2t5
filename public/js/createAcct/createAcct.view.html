<div class='container'>
	<br>
	<div class='row'>

		<div class='col-md-offset-3 col-md-6'>
			<h4>Account Information</h4>
			<div class="panel panel-default">
				<div class="panel-body">
					<form name='createAcctForm' novalidate>
						<div class='row'>
							<div class='col-md-6'>
								<div class='form-group' ng-class='{"has-error": !createAcctForm.username.$valid && createAcctForm.username.$dirty}'>
									<label for='username'>Username</label>

									<!--Restrict inputs to alpha numeric characters and dashes/underscores-->
									<input type='text' ng-model-options='{updateOn: "blur"}' ng-model='username' ng-pattern='/^[a-zA-Z0-9_-]*$/' class='form-control' id='username' name='username' required>

									<error-message ng-show='createAcctForm.username.$error.pattern && !createAcctForm.username.$error.required'>
										Username can only contain alphanumeric characters, dashes, and underscores
									</error-message>

									<!--Required error message, only show when dirty-->
									<error-message ng-show='createAcctForm.username.$error.required && createAcctForm.username.$dirty'>
										Username is required
									</error-message>
								</div>
							</div>

							<div class='col-md-6'>
								<div class='form-group' ng-class='{"has-error": createAcctForm.email.$error.email}'>
									<label for='email'>Email</label>

									<!--Restrict inputs to alpha numeric characters and dashes/underscores-->
									<input type='email' ng-model-options='{updateOn: "blur"}' ng-model='email' class='form-control' id='email' name='email'>
									
									<error-message ng-show='createAcctForm.email.$error.email && createAcctForm.email.$dirty'>
										Not a valid email
									</error-message>
								</div>
							</div>
						</div>

						<div class='row'>
							<div class='col-md-6'>
								<div class='form-group' ng-class='{"has-error": !createAcctForm.password.$valid && createAcctForm.password.$dirty}'>
									<label for='password'>Password</label>

									<!--Restrict inputs to alpha numeric characters and dashes/underscores-->
									<input type='password' ng-model-options='{updateOn: "blur"}' ng-model='password' ng-change='checkPasswordMatch(createAcctForm.confirmPassword)' ng-minlength='8' class='form-control' id='password' name='password' required>

									<!--Show error messages for password-->
									<!--Invalid password message, if required error exists, show that instead-->
									<error-message ng-show='createAcctForm.password.$error.minlength && !createAcctForm.password.$error.required'>
										Password must be atleast 8 characters long
									</error-message>

									<!--Required error message, only show when dirty-->
									<error-message ng-show='createAcctForm.password.$error.required && createAcctForm.password.$dirty'>
										Password is required
									</error-message>
								</div>
							</div>

							<div class='col-md-6'>
								<div class='form-group' ng-class='{"has-error": !createAcctForm.confirmPassword.$valid && createAcctForm.confirmPassword.$dirty}'>
									<label for='confirmPassword'>Confirm Password</label>

									<!--Restrict inputs to alpha numeric characters and dashes/underscores-->
									<input type='password' ng-model-options='{updateOn: "blur"}' ng-model='confirmPassword' ng-change='checkPasswordMatch(createAcctForm.confirmPassword)' class='form-control' id='confirmPassword' name='confirmPassword' required>

									<!--Show error messages for confirmPassword-->
									<!--Invalid confirmPassword message, if required error exists, show that instead-->
									<error-message ng-show='createAcctForm.confirmPassword.$error.pwMatch && !createAcctForm.confirmPassword.$error.required'>
										Password does not match
									</error-message>

									<error-message ng-show='createAcctForm.confirmPassword.$error.required && createAcctForm.confirmPassword.$dirty'>
										Password confirmation is required
									</error-message>
								</div>
							</div>
						</div>

						<div class='row'>
							<div class='col-md-6'>
								<div class='form-group' ng-class='{"has-error": !createAcctForm.phone.$valid && createAcctForm.phone.$dirty}'>
									<label for='phone'>Phone</label>

									<!--Restrict inputs to alpha numeric characters and dashes/underscores-->
									<input type='text' ng-model-options='{updateOn: "blur"}' ng-pattern='/^(\d+(-\d+)?)*$/' ng-model='phone' class='form-control' id='phone' name='phone'>

									<!--Required error message, only show when dirty-->
									<error-message ng-show='createAcctForm.phone.$error.pattern'>
										Phone number is not valid
									</error-message>
								</div>
							</div>
						</div>
					</form>

					<div class='form-group'>
						<label class='checkbox-inline'><input type='checkbox' ng-model='transfer'>Transfer account?</label>
					</div>

					<div ng-hide='transfer'>
						<div class='row'>
							<div class='col-md-8'>
								<h4>Dependents</h4>
							</div>
							<div class='col-md-2'>
								<button class='btn btn-default btn-block' ng-click='addPerson()'>Add</button>
							</div>
							<div class='col-md-2'>
								<button class='btn btn-default btn-block' ng-click='deleteLastPerson()'>Delete</button> 
							</div>
						</div>
						{{dependents}}
						<form name='dependentsForm' novalidate>
							<div ng-repeat='idx in dependentIndices'>
								<div class="panel panel-default">
									<div class="panel-body">
										<div class='row' ng-model='dependents[idx]'>
											<div class='col-md-6'>
												<required-input model='dependents[idx].firstname' validation='dependentsForm' identifier='firstname{{idx}}'>First Name</required-input>
											</div>

											<div class='col-md-6'>
												<required-input model='dependents[idx].lastname' validation='dependentsForm' identifier='lastname{{idx}}'>Last Name</required-input>
											</div>
										</div>
									</div>
								</div>
							</div>
						</form>
					</div>
				
				</div>
			</div>
		
			<button class='btn btn-default pull-right' ng-click='createAccount(createAcctForm, dependentsForm)'>Create Account</button>
			
		</div>
		
	</div>
</div>